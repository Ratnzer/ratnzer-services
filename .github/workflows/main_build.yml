name: Unified App Build & Release

permissions:
  contents: write
  pull-requests: write

on:
  push:
    branches: [ "main" ]
    tags:
      - '*.*.*'
      - '*'
  workflow_dispatch:
    inputs:
      version:
        description: 'Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)'
        required: false
        type: string

jobs:
  build-and-release:
    name: Build & Release
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ØªØ­Ø¯ÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙˆÙ†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        id: vars
        run: |
          IS_TAG_EVENT=false
          if [[ "${{ github.ref }}" == refs/tags/* ]] || [[ "${{ github.event_name }}" == "workflow_dispatch" && "${{ github.event.inputs.version }}" != "" ]]; then
            IS_TAG_EVENT=true
          fi
          echo "is_tag_event=$IS_TAG_EVENT" >> $GITHUB_OUTPUT
          
          if [[ "${{ github.event_name }}" == "workflow_dispatch" && "${{ github.event.inputs.version }}" != "" ]]; then
            VERSION="${{ github.event.inputs.version }}"
          elif [[ "${{ github.ref }}" == refs/tags/* ]]; then
            TAG_NAME=${GITHUB_REF#refs/tags/}
            VERSION=${TAG_NAME#v}
          else
            LATEST_RELEASE=$(gh release list --limit 1 --json tagName --jq '.[0].tagName' 2>/dev/null || echo "")
            if [ -n "$LATEST_RELEASE" ]; then
              VERSION=${LATEST_RELEASE#v}
            else
              VERSION=$(node -p "require('./package.json').version")
            fi
          fi
          echo "version=$VERSION" >> $GITHUB_OUTPUT
          echo "ğŸ“¦ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯: $VERSION"
        env:
          GH_TOKEN: ${{ github.token }}

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Setup Java (JDK 17)
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: '17'

      - name: Install Dependencies
        run: npm install --legacy-peer-deps

      - name: Validate Firebase build variables
        run: |
          test -n "${{ secrets.VITE_FIREBASE_API_KEY }}"
          test -n "${{ secrets.VITE_FIREBASE_AUTH_DOMAIN }}"
          test -n "${{ secrets.VITE_FIREBASE_PROJECT_ID }}"
          test -n "${{ secrets.VITE_FIREBASE_STORAGE_BUCKET }}"
          test -n "${{ secrets.VITE_FIREBASE_MESSAGING_SENDER_ID }}"
          test -n "${{ secrets.VITE_FIREBASE_APP_ID }}"

      - name: ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª
        env:
          APP_VERSION: ${{ steps.vars.outputs.version }}
        run: npm run update-version

      - name: Build Web Assets
        env:
          VITE_API_URL: https://ratnzer-services-bb0a0cce4837.herokuapp.com/api
          VITE_FIREBASE_API_KEY: ${{ secrets.VITE_FIREBASE_API_KEY }}
          VITE_FIREBASE_AUTH_DOMAIN: ${{ secrets.VITE_FIREBASE_AUTH_DOMAIN }}
          VITE_FIREBASE_PROJECT_ID: ${{ secrets.VITE_FIREBASE_PROJECT_ID }}
          VITE_FIREBASE_STORAGE_BUCKET: ${{ secrets.VITE_FIREBASE_STORAGE_BUCKET }}
          VITE_FIREBASE_MESSAGING_SENDER_ID: ${{ secrets.VITE_FIREBASE_MESSAGING_SENDER_ID }}
          VITE_FIREBASE_APP_ID: ${{ secrets.VITE_FIREBASE_APP_ID }}
        run: npm run build

      - name: Ø¶ØºØ· Ù…Ù„ÙØ§Øª Ø§Ù„ÙˆÙŠØ¨ (Web Build)
        run: |
          zip -r web-build-v${{ steps.vars.outputs.version }}.zip dist/

      - name: Initialize Android Platform
        run: |
          # Ø­Ø°Ù Ù…Ø¬Ù„Ø¯ android Ù„Ø¶Ù…Ø§Ù† Ø¨Ù†Ø§Ø¡ Ù†Ø¸ÙŠÙ ÙˆØªØ¬Ù†Ø¨ ÙÙ‚Ø¯Ø§Ù† Ù…Ù„ÙØ§Øª Gradle
          rm -rf android
          npx cap add android

      - name: ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø¥ØµØ¯Ø§Ø± Android
        env:
          APP_VERSION: ${{ steps.vars.outputs.version }}
        run: npm run update-android-version

      - name: Add google-services.json (base64)
        run: |
          mkdir -p android/app
          printf "%s" "${{ secrets.GOOGLE_SERVICES_JSON_B64 }}" | base64 --decode > android/app/google-services.json
          test -s android/app/google-services.json

      # âœ… Ø®Ø·ÙˆØ© Ø¬Ø¯ÙŠØ¯Ø©: Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù strings.xml Ù…Ø¹ Facebook App ID
      - name: Setup Facebook Authentication Config
        run: |
          echo "ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„Ù strings.xml Ù…Ø¹ Facebook App ID..."
          STRINGS_FILE="android/app/src/main/res/values/strings.xml"
          
          # Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø¬Ù„Ø¯
          mkdir -p android/app/src/main/res/values
          
          # Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯
          if [ -f "$STRINGS_FILE" ]; then
            echo "âœ“ Ù…Ù„Ù strings.xml Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«..."
            # Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            cp "$STRINGS_FILE" "${STRINGS_FILE}.backup"
          else
            echo "âœ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù strings.xml Ø¬Ø¯ÙŠØ¯..."
            cat > "$STRINGS_FILE" << 'EOF'
          <?xml version='1.0' encoding='utf-8'?>
          <resources>
          </resources>
          EOF
          fi
          
          # Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ ØªØ­Ø¯ÙŠØ« Facebook settings
          # Ù†Ø³ØªØ®Ø¯Ù… xmlstarlet Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªÙˆÙØ±Ø§Ù‹ØŒ ÙˆØ¥Ù„Ø§ Ù†Ø³ØªØ®Ø¯Ù… sed
          if command -v xmlstarlet &> /dev/null; then
            echo "Ø§Ø³ØªØ®Ø¯Ø§Ù… xmlstarlet Ù„Ù„ØªØ­Ø¯ÙŠØ«..."
            xmlstarlet ed -L \
              -s "/resources" -t elem -n "string" -v "2994111874110231" \
              -i "/resources/string[last()]" -t attr -n "name" -v "facebook_app_id" \
              "$STRINGS_FILE" 2>/dev/null || true
            xmlstarlet ed -L \
              -s "/resources" -t elem -n "string" -v "fb2994111874110231" \
              -i "/resources/string[last()]" -t attr -n "name" -v "fb_login_protocol_scheme" \
              "$STRINGS_FILE" 2>/dev/null || true
            xmlstarlet ed -L \
              -s "/resources" -t elem -n "string" -v "c55884326412a3468d50b1952f047bbd" \
              -i "/resources/string[last()]" -t attr -n "name" -v "facebook_client_token" \
              "$STRINGS_FILE" 2>/dev/null || true
          else
            echo "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ù„ØªØ­Ø¯ÙŠØ«..."
            # Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø³Ø·ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
            sed -i '/<string name="facebook_app_id">/d' "$STRINGS_FILE"
            sed -i '/<string name="fb_login_protocol_scheme">/d' "$STRINGS_FILE"
            sed -i '/<string name="facebook_client_token">/d' "$STRINGS_FILE"
            
            # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø·ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø¨Ù„ </resources>
            sed -i 's|</resources>|    <string name="facebook_app_id">2994111874110231</string>\n    <string name="fb_login_protocol_scheme">fb2994111874110231</string>\n    <string name="facebook_client_token">c55884326412a3468d50b1952f047bbd</string>\n</resources>|' "$STRINGS_FILE"
          fi
          
          echo "âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù strings.xml Ø¨Ù†Ø¬Ø§Ø­"
          echo "Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù:"
          cat "$STRINGS_FILE"

      # âœ… Ø®Ø·ÙˆØ© Ø¬Ø¯ÙŠØ¯Ø©: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Facebook ÙÙŠ AndroidManifest.xml
      - name: Verify AndroidManifest.xml Facebook Config
        run: |
          echo "ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Facebook ÙÙŠ AndroidManifest.xml..."
          MANIFEST_FILE="android/app/src/main/AndroidManifest.xml"
          
          if [ -f "$MANIFEST_FILE" ]; then
            echo "âœ“ Ù…Ù„Ù AndroidManifest.xml Ù…ÙˆØ¬ÙˆØ¯"
            
            # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ meta-data Ù„Ù„Ù€ Facebook
            if grep -q "com.facebook.sdk.ApplicationId" "$MANIFEST_FILE"; then
              echo "âœ… Facebook ApplicationId Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ AndroidManifest"
            else
              echo "âš ï¸  ØªØ­Ø°ÙŠØ±: Facebook ApplicationId ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ AndroidManifest"
              echo "Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Capacitor Ù„Ø¥Ø¶Ø§ÙØªÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹..."
            fi
            
            # Ø¹Ø±Ø¶ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ù„ØªØ£ÙƒØ¯
            echo "--- Ø¨Ø¯Ø§ÙŠØ© AndroidManifest.xml ---"
            head -30 "$MANIFEST_FILE"
            echo "--- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ·Ù ---"
          else
            echo "âŒ Ø®Ø·Ø£: Ù…Ù„Ù AndroidManifest.xml ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
            exit 1
          fi

      - name: Install Capacitor Assets Tool
        run: npm i -D @capacitor/assets --legacy-peer-deps

      - name: Generate Android assets from resources
        run: npx @capacitor/assets generate --android

      - name: Sync Capacitor
        run: npx cap sync android

      # âœ… Ø®Ø·ÙˆØ© Ø¬Ø¯ÙŠØ¯Ø©: Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
      - name: Final Verification of Required Files
        run: |
          echo "ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©..."
          
          ERRORS=0
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† google-services.json
          if [ -f "android/app/google-services.json" ]; then
            echo "âœ… google-services.json Ù…ÙˆØ¬ÙˆØ¯"
            # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù†Ù‡ Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹
            if [ -s "android/app/google-services.json" ]; then
              echo "âœ… google-services.json ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª"
            else
              echo "âŒ google-services.json ÙØ§Ø±Øº!"
              ERRORS=$((ERRORS + 1))
            fi
          else
            echo "âŒ google-services.json ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
            ERRORS=$((ERRORS + 1))
          fi
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† strings.xml
          if [ -f "android/app/src/main/res/values/strings.xml" ]; then
            echo "âœ… strings.xml Ù…ÙˆØ¬ÙˆØ¯"
            
            # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Facebook App ID
            if grep -q "facebook_app_id" "android/app/src/main/res/values/strings.xml"; then
              echo "âœ… Facebook App ID Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ strings.xml"
            else
              echo "âŒ Facebook App ID ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ strings.xml!"
              ERRORS=$((ERRORS + 1))
            fi
          else
            echo "âŒ strings.xml ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
            ERRORS=$((ERRORS + 1))
          fi
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† capacitor.config.ts (ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ)
          if grep -q "FirebaseAuthentication" "capacitor.config.ts"; then
            echo "âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª FirebaseAuthentication Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ capacitor.config.ts"
          else
            echo "âš ï¸  ØªØ­Ø°ÙŠØ±: Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª FirebaseAuthentication ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ capacitor.config.ts"
            echo "    ÙŠÙÙØ¶Ù„ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"
          fi
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† build.gradle
          if [ -f "android/app/build.gradle" ]; then
            echo "âœ… build.gradle Ù…ÙˆØ¬ÙˆØ¯"
          else
            echo "âŒ build.gradle ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
            ERRORS=$((ERRORS + 1))
          fi
          
          echo ""
          if [ $ERRORS -eq 0 ]; then
            echo "âœ…âœ…âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆØµØ­ÙŠØ­Ø©!"
          else
            echo "âŒâŒâŒ Ù‡Ù†Ø§Ùƒ $ERRORS Ù…Ù„ÙØ§Øª Ù†Ø§Ù‚ØµØ© Ø£Ùˆ Ø¨Ù‡Ø§ Ù…Ø´Ø§ÙƒÙ„!"
            echo "Ø³ÙŠØªÙ… Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡ØŒ Ù„ÙƒÙ† Ù‚Ø¯ ØªØ­Ø¯Ø« Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„..."
          fi

      - name: Build APK & AAB (Always Release)
        run: |
          cd android
          chmod +x gradlew
          echo "ğŸ—ï¸ Ø¨Ù†Ø§Ø¡ Ù…Ù„Ù APK (Ù„Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±)..."
          ./gradlew assembleRelease
          echo "ğŸ—ï¸ Ø¨Ù†Ø§Ø¡ Ù…Ù„Ù AAB (Ù„Ù…ØªØ¬Ø± Ø¬ÙˆØ¬Ù„ Ø¨Ù„Ø§ÙŠ)..."
          ./gradlew bundleRelease

      - name: ØªÙˆÙ‚ÙŠØ¹ Ù…Ù„Ù APK
        uses: r0adkll/sign-android-release@v1
        id: sign_apk
        with:
          releaseDirectory: android/app/build/outputs/apk/release
          signingKeyBase64: ${{ secrets.ANDROID_KEYSTORE_BASE64 }}
          alias: ${{ secrets.ANDROID_KEY_ALIAS }}
          keyStorePassword: ${{ secrets.ANDROID_KEYSTORE_PASSWORD }}
          keyPassword: ${{ secrets.ANDROID_KEY_PASSWORD }}
        env:
          BUILD_TOOLS_VERSION: "34.0.0"

      - name: ØªÙˆÙ‚ÙŠØ¹ Ù…Ù„Ù AAB (Ù„Ù…ØªØ¬Ø± Ø¨Ù„Ø§ÙŠ)
        uses: r0adkll/sign-android-release@v1
        id: sign_aab
        with:
          releaseDirectory: android/app/build/outputs/bundle/release
          signingKeyBase64: ${{ secrets.ANDROID_KEYSTORE_BASE64 }}
          alias: ${{ secrets.ANDROID_KEY_ALIAS }}
          keyStorePassword: ${{ secrets.ANDROID_KEYSTORE_PASSWORD }}
          keyPassword: ${{ secrets.ANDROID_KEY_PASSWORD }}
        env:
          BUILD_TOOLS_VERSION: "34.0.0"

      - name: Ø¥Ù†Ø´Ø§Ø¡ Release ÙˆØ±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
        if: steps.vars.outputs.is_tag_event == 'true'
        uses: softprops/action-gh-release@v2
        with:
          tag_name: v${{ steps.vars.outputs.version }}
          name: Ø§Ù„Ø¥ØµØ¯Ø§Ø± ${{ steps.vars.outputs.version }}
          files: |
            ${{ steps.sign_apk.outputs.signedReleaseFile }}
            ${{ steps.sign_aab.outputs.signedReleaseFile }}
            web-build-v${{ steps.vars.outputs.version }}.zip
          body: |
            ## ğŸ‰ Ø§Ù„Ø¥ØµØ¯Ø§Ø± ${{ steps.vars.outputs.version }}
            ØªÙ… Ø¨Ù†Ø§Ø¡ ÙˆØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Google Ùˆ Facebook.
            
            ### ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø©:
            1. **APK**: Ù„Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ.
            2. **AAB**: Ù„Ù„Ø±ÙØ¹ Ø¹Ù„Ù‰ Ù…ØªØ¬Ø± Ø¬ÙˆØ¬Ù„ Ø¨Ù„Ø§ÙŠ (Google Play Store).
            3. **Web Build**: Ù…Ù„ÙØ§Øª Ø§Ù„ÙˆÙŠØ¨ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø§Ø³ØªØ¶Ø§ÙØ©.
            
            ### âœ¨ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø¥ØµØ¯Ø§Ø±:
            - âœ… Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Google
            - âœ… Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Facebook
            - âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª
          draft: false
          prerelease: false

      - name: Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙƒÙ€ Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: Ratnzer-App-v${{ steps.vars.outputs.version }}
          path: |
            ${{ steps.sign_apk.outputs.signedReleaseFile }}
            ${{ steps.sign_aab.outputs.signedReleaseFile }}
            web-build-v${{ steps.vars.outputs.version }}.zip
          retention-days: 14
